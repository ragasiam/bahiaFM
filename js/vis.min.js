window.AudioContext=window.AudioContext||window.webkitAudioContext||window.a||window.b;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;
var d=canvasVis.getContext("2d"),g=new (window.AudioContext||window.webkitAudioContext||window.a||window.b),k=g.createAnalyser();k.fftSize=256;k.smoothingTimeConstant=.7;k.minDecibels=-160;k.maxDecibels=-35;
function m(){var f,e,h=new Uint8Array(92),c=d.createLinearGradient(0,canvasVis.height,0,0),l=Math.floor(h.length/92);window.requestAnimationFrame(m);k.getByteFrequencyData(h);k||canvasVis.c(h[0]);d.clearRect(0,0,canvasVis.width,canvasVis.height);c.addColorStop(.98,"#FFCB05");c.addColorStop(.3,"#00aeef");c.addColorStop(.1,"#FFCB05");d.fillStyle=c;for(c=0;92>c;c+=1){for(e=f=0;e<l;e+=1)f+=h[c*l+e];e=f/l;f=canvasVis.width/92;e=e/256*canvasVis.height;d.fillRect(c*f,canvasVis.height,f/1.2,-e)}}g.createMediaElementSource(audioE).connect(k);
k.connect(g.destination);m();resizeCanvas=function(){canvasVis.width=window.innerWidth;canvasVis.height=window.innerHeight};window.addEventListener("resize",resizeCanvas,!1);resizeCanvas();
