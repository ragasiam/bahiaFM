window.AudioContext=window.AudioContext||window.webkitAudioContext||window.a||window.b;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;
var d=canvasVis.getContext("2d"),e=new (window.AudioContext||window.webkitAudioContext||window.a||window.b),h=e.createAnalyser();h.fftSize=256;h.smoothingTimeConstant=.7;h.minDecibels=-160;h.maxDecibels=-35;
function l(){var c,f,g=new Uint8Array(92);c=d.createLinearGradient(0,canvasVis.height,0,0);var k=Math.floor(g.length/92);window.requestAnimationFrame(l);h.getByteFrequencyData(g);h||canvasVis.c(g[0]);d.clearRect(0,0,canvasVis.width,canvasVis.height);c.addColorStop(.98,"#FFCB05");c.addColorStop(.3,"#00aeef");c.addColorStop(.1,"#FFCB05");d.fillStyle=c;for(i=0;92>i;i+=1){for(j=c=0;j<k;j+=1)c+=g[i*k+j];f=c/k;c=canvasVis.width/92;f=f/256*canvasVis.height;d.fillRect(i*c,canvasVis.height,c/1.2,-f)}}e.createMediaElementSource(audioE).connect(h);
h.connect(e.destination);l();resizeCanvas=function(){canvasVis.width=window.innerWidth;canvasVis.height=window.innerHeight};window.addEventListener("resize",resizeCanvas,!1);resizeCanvas();
